---
title: "SDK Usage"
description: "Use the official SDK for easier integration"
---

The Proofly API provides an official SDK for Node.js and TypeScript applications. The SDK handles authentication, job polling, and error handling automatically.

## Installation

<CodeGroup>

```bash npm
npm install @plank-proofly/api
```

```bash yarn
yarn add @plank-proofly/api
```

```bash pnpm
pnpm add @plank-proofly/api
```

</CodeGroup>

## Getting Started

Initialize the client with your API key:

```typescript
import { PlankProofly } from '@plank-proofly/api';

const client = new PlankProofly({ 
  apiKey: 'sk_your_api_key_here' // starts with sk_...
});
```

## Job Management

The SDK automatically handles job polling for asynchronous operations. Simply call the method and wait for results:

```typescript
try {
  const status = await client.jobs.retrieveStatus('job-id');
  
  console.log(`Job Status: ${status.status}`); // 'queued', 'processing', 'completed', 'failed'
  
  if (status.status === 'completed') {
    console.log('Result:', status.resultData);
  }
} catch (error) {
  console.error('Error fetching job:', error);
}
```

## Profile Search

Search for Facebook profiles with automatic job polling:

```typescript
// The SDK handles job creation and polling automatically
const result = await client.profiles.search({
  name: 'John Doe',
  location: 'New York, NY',
  birthYear: 1990
});

console.log('Primary Match:', result.primaryMatch);
console.log('Candidates:', result.candidates);
```

## Facebook Friend Check

Check if profiles are friends:

```typescript
const result = await client.facebook.checkFriends({
  targetFacebookId: '123456789',
  candidateIds: ['987654321', '111222333']
});

console.log('Friends:', result.friends);
```

Find mutual friends:

```typescript
const result = await client.facebook.findMutualFriends({
  userIds: ['123456789', '987654321', '111222333']
});

console.log('Mutual Friends:', result.mutualFriends);
```

## Profile Photo Verification

Verify a photo matches a Facebook profile:

```typescript
const result = await client.profiles.verifyPhoto({
  photoUrl: 'https://example.com/photo.jpg',
  profileUrl: 'https://facebook.com/john.doe'
});

console.log('Confidence:', result.confidence);
console.log('Match:', result.photoMatch);
console.log('Justification:', result.justification);
```

## Fuzzy Search

Get suggestions for names, locations, or emails:

```typescript
// Single search
const result = await client.fuzzy.search({
  type: 'name',
  value: 'Jon Doe'
});

console.log('Suggestions:', result.suggestions);
console.log('Normalized:', result.normalizedValue);

// Batch search
const batchResult = await client.fuzzy.searchBatch({
  requests: [
    { type: 'name', value: 'Jon Doe' },
    { type: 'location', value: 'NYC' },
    { type: 'email', value: 'john.doe@gmial.com' }
  ]
});

console.log('Results:', batchResult.results);
```

## Error Handling

The SDK throws errors for non-2xx responses. Handle them appropriately:

```typescript
try {
  const result = await client.profiles.search({ name: 'John Doe' });
} catch (error) {
  if (error.status === 401 || error.status === 403) {
    console.error('Invalid API Key');
  } else if (error.status === 404) {
    console.error('Resource not found');
  } else if (error.status === 429) {
    console.error('Rate limit exceeded');
  } else {
    console.error('Server error:', error.message);
  }
}
```

## Configuration Options

You can configure the SDK with additional options:

```typescript
const client = new PlankProofly({
  apiKey: 'sk_your_api_key_here',
  baseUrl: 'https://api.proofly.joinplank.com', // Optional: override base URL
  timeout: 30000, // Optional: request timeout in milliseconds
  retries: 3 // Optional: number of retries for failed requests
});
```

## TypeScript Support

The SDK is written in TypeScript and provides full type definitions:

```typescript
import { PlankProofly, ProfileSearchResult, JobStatus } from '@plank-proofly/api';

const client = new PlankProofly({ apiKey: 'sk_...' });

// All methods are fully typed
const result: ProfileSearchResult = await client.profiles.search({
  name: 'John Doe'
});
```

## Advanced Usage

### Custom Polling Configuration

Configure job polling behavior:

```typescript
const client = new PlankProofly({
  apiKey: 'sk_your_api_key_here',
  polling: {
    interval: 2000, // Poll every 2 seconds
    maxAttempts: 60, // Maximum polling attempts
    timeout: 120000 // Total timeout in milliseconds
  }
});
```

### Manual Job Polling

If you prefer to handle polling manually:

```typescript
// Submit job
const { jobId } = await client.profiles.searchAsync({
  name: 'John Doe'
});

// Poll manually
let status: JobStatus;
do {
  await new Promise(resolve => setTimeout(resolve, 2000));
  status = await client.jobs.retrieveStatus(jobId);
} while (status.status === 'queued' || status.status === 'processing');

if (status.status === 'completed') {
  console.log('Results:', status.resultData);
}
```

## Package Information

- **Package**: [`@plank-proofly/api`](https://www.npmjs.com/package/@plank-proofly/api)
- **Repository**: Check the project README for GitHub link
- **Documentation**: See the project's [SDK.md](/../agent-profile-check/SDK.md) for detailed documentation

## Related Documentation

- [Quickstart Guide](/quickstart) - Get started with the API
- [API Reference](/api-reference/introduction) - Complete API documentation
- [Best Practices](/guides/best-practices) - Integration recommendations

